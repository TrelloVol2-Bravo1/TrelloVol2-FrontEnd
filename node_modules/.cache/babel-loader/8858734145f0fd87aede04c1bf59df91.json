{"ast":null,"code":"var _jsxFileName = \"/home/przemek/Documents/TrelloVol2-FrontEnd/src/components/tables.component.tsx\";\nimport React from \"react\";\nimport ApiService from \"../services/api.service\";\nimport { TableModel } from \"../models/table.model\";\nimport styles from \"./tables.module.css\";\nimport Card from \"react-bootstrap/Card\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport UserService from \"../services/user.service\";\nimport { Redirect } from \"react-router-dom\";\nexport default class TablesComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      refresh: false,\n      redirect: false,\n      creationView: false,\n      newTableName: '',\n      redirectUrl: ''\n    };\n    this.tables = [];\n\n    this.renderRedirect = () => {\n      if (this.state.redirect) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: '/' + this.state.redirectUrl,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 20\n          }\n        });\n      }\n    };\n  }\n\n  async componentDidMount() {\n    this.tables = await ApiService.GetTables();\n    this.refresh();\n  }\n\n  deleteTable(table) {\n    const index = this.tables.indexOf(table);\n\n    if (index !== -1) {\n      ApiService.DeleteTable(table);\n      this.tables.splice(index, 1);\n      this.refresh();\n    }\n  }\n\n  openTable(table) {\n    this.setState({\n      redirectUrl: 'table/' + table.getTableId(),\n      redirect: true\n    });\n  }\n\n  refresh() {\n    this.setState({\n      refresh: false\n    });\n    this.setState({\n      refresh: true\n    });\n  }\n\n  createTableView() {\n    let table = [];\n\n    if (this.state.refresh) {\n      let view;\n      view = [];\n      this.tables.forEach(tab => {\n        view.push( /*#__PURE__*/React.createElement(Card, {\n          className: styles.card,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(Card.Body, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Card.Title, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }\n        }, tab.getTableName()), /*#__PURE__*/React.createElement(\"div\", {\n          className: styles.btnGroup,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          className: styles.btn,\n          onClick: () => {\n            this.openTable(tab);\n          },\n          variant: \"success\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 29\n          }\n        }, \"Open\"), /*#__PURE__*/React.createElement(Button, {\n          className: styles.btn,\n          onClick: () => {\n            this.deleteTable(tab);\n          },\n          variant: \"danger\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }\n        }, \"Delete\")))));\n      });\n      table.push(view);\n    }\n\n    return table;\n  }\n\n  async createTable(name) {\n    const response = await ApiService.CreateTable(name);\n    const table = new TableModel(response.id, response.name, response.author_id);\n    this.tables.push(table);\n    this.refresh();\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  createTableCreationView() {\n    if (this.state.creationView) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.createNewButtonDiv,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Form.Control, {\n        name: 'newTableName',\n        value: this.state.newTableName,\n        onChange: this.handleChange.bind(this),\n        type: \"text\",\n        placeholder: \"New table name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.createNewButtonDiv,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => this.createTable(this.state.newTableName),\n        variant: \"success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, \"Create\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: () => this.toggleCreationView(false),\n        variant: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }, \"Hide\")));\n    }\n  }\n\n  toggleCreationView(status) {\n    this.setState({\n      creationView: status\n    });\n  }\n\n  render() {\n    UserService.subject.subscribe(() => {\n      this.setState({\n        redirect: true\n      });\n    });\n    return /*#__PURE__*/React.createElement(React.Fragment, null, this.renderRedirect(), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.creationForm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, this.createTableCreationView()), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tables,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, this.createTableView()), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.createNewButtonDiv,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => this.toggleCreationView(true),\n      className: styles.createNewButton,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, \"Create table\"))));\n  }\n\n}","map":{"version":3,"sources":["/home/przemek/Documents/TrelloVol2-FrontEnd/src/components/tables.component.tsx"],"names":["React","ApiService","TableModel","styles","Card","Button","Form","UserService","Redirect","TablesComponent","Component","state","refresh","redirect","creationView","newTableName","redirectUrl","tables","renderRedirect","componentDidMount","GetTables","deleteTable","table","index","indexOf","DeleteTable","splice","openTable","setState","getTableId","createTableView","view","forEach","tab","push","card","getTableName","btnGroup","btn","createTable","name","response","CreateTable","id","author_id","handleChange","event","target","value","createTableCreationView","createNewButtonDiv","bind","toggleCreationView","status","render","subject","subscribe","container","creationForm","createNewButton"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ApiService from \"../services/api.service\";\nimport {TableModel} from \"../models/table.model\";\nimport styles from \"./tables.module.css\";\nimport Card from \"react-bootstrap/Card\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport UserService from \"../services/user.service\";\nimport {Redirect} from \"react-router-dom\";\n\nexport default class TablesComponent extends React.Component {\n\n    state = {\n        refresh: false,\n        redirect: false,\n        creationView: false,\n        newTableName: '',\n        redirectUrl: ''\n    }\n\n    tables: TableModel[] = [];\n\n    async componentDidMount() {\n        this.tables = await ApiService.GetTables();\n        this.refresh();\n    }\n\n    private deleteTable(table: TableModel) {\n        const index = this.tables.indexOf(table);\n        if (index !== -1) {\n            ApiService.DeleteTable(table);\n            this.tables.splice(index, 1);\n            this.refresh();\n        }\n    }\n\n    private openTable(table: TableModel) {\n        this.setState({\n            redirectUrl: 'table/' + table.getTableId(),\n            redirect: true\n        })\n    }\n\n    private refresh(): void {\n        this.setState({refresh: false});\n        this.setState({refresh: true});\n    }\n\n    private createTableView() {\n        let table = [];\n        if (this.state.refresh) {\n            let view: any[];\n            view = [];\n            this.tables.forEach(tab => {\n                view.push(<Card className={styles.card}>\n                    <Card.Body>\n                        <Card.Title>\n                            {tab.getTableName()}\n                        </Card.Title>\n                        <div className={styles.btnGroup}>\n                            <Button className={styles.btn} onClick={() => {\n                                this.openTable(tab);\n                            }} variant={\"success\"}>Open</Button>\n                            <Button className={styles.btn} onClick={() => {\n                                this.deleteTable(tab);\n                            }} variant={\"danger\"}>Delete</Button>\n                        </div>\n                    </Card.Body>\n                </Card>)\n            });\n            table.push(view);\n        }\n        return table;\n    }\n\n    private async createTable(name: string) {\n        const response = await ApiService.CreateTable(name);\n        const table = new TableModel(response.id, response.name, response.author_id);\n        this.tables.push(table);\n        this.refresh();\n\n    }\n\n    handleChange(event: React.ChangeEvent<HTMLInputElement>) {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    private createTableCreationView() {\n        if (this.state.creationView) {\n            return (<>\n                    <div className={styles.createNewButtonDiv}>\n                        <Form.Group>\n                            <Form.Control name={'newTableName'} value={this.state.newTableName} onChange={this.handleChange.bind(this)} type=\"text\" placeholder=\"New table name\"/>\n                        </Form.Group>\n                    </div>\n                    <div className={styles.createNewButtonDiv}>\n                        <Button onClick={() => this.createTable(this.state.newTableName)} variant={\"success\"}>Create</Button>\n                        <Button onClick={() => this.toggleCreationView(false)} variant={\"danger\"}>Hide</Button>\n                    </div>\n                </>\n            );\n        }\n    }\n\n    private toggleCreationView(status: boolean) {\n        this.setState({creationView: status})\n    }\n\n    renderRedirect = () => {\n        if (this.state.redirect) {\n            return <Redirect to={'/'  + this.state.redirectUrl}/>\n        }\n    }\n\n    render() {\n        UserService.subject.subscribe(() => {\n           this.setState({\n               redirect: true,\n           })\n        });\n        return (<>\n            {this.renderRedirect()}\n            <div className={styles.container}>\n                <div className={styles.creationForm}>\n                    {this.createTableCreationView()}\n                </div>\n                <div className={styles.tables}>\n                    {this.createTableView()}\n                </div>\n                <div className={styles.createNewButtonDiv}>\n                    <Button onClick={() => this.toggleCreationView(true)} className={styles.createNewButton}>\n                        Create table\n                    </Button>\n                </div>\n            </div>\n        </>);\n    }\n}\n"]},"metadata":{},"sourceType":"module"}